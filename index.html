<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TRC20 Token Deployer</title>
  <script src="https://cdn.jsdelivr.net/npm/tronweb/dist/TronWeb.js"></script>
</head>
<body>
  <h2>TRC20 Token Deployer</h2>
  <button onclick="connectWallet()">Connect TronLink</button><br><br>
  <input id="name" placeholder="Token Name" /><br>
  <input id="symbol" placeholder="Symbol" /><br>
  <input id="decimals" type="number" placeholder="Decimals (e.g. 6)" /><br>
  <input id="supply" type="number" placeholder="Initial Supply" /><br>
  <button onclick="deployToken()">Deploy</button>
  <p id="status"></p>

  <script>
    const abi = [{'inputs': [{'internalType': 'string', 'name': '_name', 'type': 'string'}, {'internalType': 'string', 'name': '_symbol', 'type': 'string'}, {'internalType': 'uint8', 'name': '_decimals', 'type': 'uint8'}, {'internalType': 'uint256', 'name': '_initialSupply', 'type': 'uint256'}], 'stateMutability': 'nonpayable', 'type': 'constructor'}, {'anonymous': False, 'inputs': [{'indexed': True, 'internalType': 'address', 'name': 'from', 'type': 'address'}, {'indexed': True, 'internalType': 'address', 'name': 'to', 'type': 'address'}, {'indexed': False, 'internalType': 'uint256', 'name': 'value', 'type': 'uint256'}], 'name': 'Transfer', 'type': 'event'}, {'inputs': [{'internalType': 'address', 'name': '_to', 'type': 'address'}, {'internalType': 'uint256', 'name': '_value', 'type': 'uint256'}], 'name': 'transfer', 'outputs': [{'internalType': 'bool', 'name': 'success', 'type': 'bool'}], 'stateMutability': 'nonpayable', 'type': 'function'}];
    const bytecode = "0x608060405234801561001057600080fd5b506040516104003803806104008339818101604052602081101561003357600080fd5b81019080805190602001909291905050508060008190555050610137806100596000396000f3fe60806040...";

    async function connectWallet() {
      const status = document.getElementById('status');
      if (!window.tronWeb || !tronWeb.ready) {
        status.innerText = "❌ TronLink not connected";
        return;
      }
      const address = tronWeb.defaultAddress.base58;
      status.innerText = "✅ Connected: " + address;
    }

    async function deployToken() {
      const name = document.getElementById('name').value;
      const symbol = document.getElementById('symbol').value;
      const decimals = parseInt(document.getElementById('decimals').value);
      const supply = parseInt(document.getElementById('supply').value);
      const status = document.getElementById('status');

      if (!tronWeb || !tronWeb.ready) {
        status.innerText = "Please connect TronLink first.";
        return;
      }

      try {
        const contract = await tronWeb.contract().new({
          abi,
          bytecode,
          parameters: [name, symbol, decimals, supply]
        });

        status.innerText = "✅ Contract deployed at: " + contract.address;
      } catch (err) {
        console.error(err);
        status.innerText = "❌ Deployment failed. Check console for details.";
      }
    }
  </script>
</body>
</html>
